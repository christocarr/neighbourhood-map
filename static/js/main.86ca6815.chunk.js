(window["webpackJsonpneighbourhood-map"]=window["webpackJsonpneighbourhood-map"]||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/menu.1181d8d6.svg"},146:function(e,t,a){e.exports=a(351)},151:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(59),i=a.n(o),l=(a(151),a(28)),s=a(29),c=a(31),u=a(30),d=a(32),h=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"heading"},"Neighbourhood Pizza"))},m=a(38),f=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filteredMarkers,a=e.handleMarkerClick,n=e.clickedMarkerVenueId,o=e.defaultCenter,i=e.defaultZoom,l=e.stopMarkerAnimation,s=Object(m.withGoogleMap)(function(e){return r.a.createElement(m.GoogleMap,{onClick:function(){return l()},defaultCenter:o,defaultZoom:i},t.map(function(e,t){return r.a.createElement(m.Marker,{key:t,position:{lat:e.lat,lng:e.lng},animation:n===e.venueId?window.google.maps.Animation.BOUNCE:null,onClick:function(){return a(e.venueId,e)}},n===e.venueId&&r.a.createElement(m.InfoWindow,{"aria-label":"More details about ".concat(e.title),className:"infowindow",onCloseClick:function(){return l()}},r.a.createElement("div",null,r.a.createElement("h3",null,e.title),r.a.createElement("p",null,"".concat(e.streetNumber,", ").concat(e.postCode," ")))))}))});return r.a.createElement("div",{className:"map-container",tabIndex:"0"},r.a.createElement(s,{containerElement:r.a.createElement("div",{style:{height:"86vh",width:"90vw"}}),mapElement:r.a.createElement("div",{style:{height:"100%"},tabIndex:"0"})}))}}]),t}(n.Component),p=a(144),k=a.n(p),g=a(145),v=a.n(g),b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={query:""},a.updateQuery=function(e){a.setState({query:e.trim()})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.listIsOpen,i=n.toggleList,l=n.markers,s=n.handleListItemClick,c=n.handleKeyPress,u=n.handleMarkerFilter;if(this.state.query){var d=new RegExp(k()(this.state.query),"i");e=l.filter(function(e){return d.test(e.title)})}else e=l;return e.sort(v()("title")),r.a.createElement("div",null,o?r.a.createElement("div",{className:"marker-list-open"},r.a.createElement("label",{htmlFor:"search"},"Search"),r.a.createElement("input",{"aria-label":"search for restuarants in this area",id:"search",type:"text",placeholder:"search for restuarant",className:"list-filter",value:this.state.query,onChange:function(a){t.updateQuery(a.target.value),u(a.target.value,e)}}),r.a.createElement("div",{className:"marker-list-container"},r.a.createElement("ul",{className:"venue-list",role:"menu","aria-label":"List of pizza and burger resuarants"},e.map(function(e,t){return r.a.createElement("li",{"aria-label":e.title,tabIndex:"0",key:t,onClick:function(){return s(e.venueId,e)},onKeyPress:function(t){return c(t,e.venueId,e)}},e.title)})),r.a.createElement("div",{className:"list-toggle-close"},r.a.createElement("img",{className:"toggle-icon",src:a(141),alt:"list closer",onClick:i,"aria-label":"Toggle to close the list of pizza and burger restuarants"})))):r.a.createElement("div",{className:"marker-list-closed"},r.a.createElement("div",{className:"list-toggle-open"},r.a.createElement("img",{className:"toggle-icon",src:a(141),alt:"list opener","aria-label":"Toggle to open a list of pizza and burger restuarants",onClick:i}))))}}]),t}(n.Component),E=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"credits"},r.a.createElement("div",null,"Icons made by ",r.a.createElement("a",{href:"https://www.flaticon.com/authors/those-icons",title:"Those Icons"},"Those Icons")," from ",r.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")," is licensed by ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0"},"CC 3.0 BY")),r.a.createElement("div",null,"Made with ",r.a.createElement("a",{href:"https://developer.foursquare.com/"},"Foursquare"))))},w=(a(350),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={defaultCenter:{lat:51.5055,lng:-.0754},defaultZoom:12,listIsOpen:!1,venues:[],markers:[],filteredMarkers:[],clickedMarkerVenueId:null,zoom:14,query:""},a.handleToggle=function(){a.state.listIsOpen?a.setState({listIsOpen:!1}):a.setState({listIsOpen:!0})},a.handleMarkerFilter=function(e,t){a.setState({filteredMarkers:t}),""===e&&a.setState({filteredMarkers:a.state.markers})},a.handleMarkerClick=function(e,t){a.setState({clickedMarkerVenueId:e,defaultCenter:{lat:t.lat,lng:t.lng},defaultZoom:a.state.zoom})},a.handleKeyPress=function(e,t,n){"Enter"===e.key&&a.handleMarkerClick(t,n)},a.stopMarkerAnimation=function(){a.setState({clickedMarkerVenueId:-1,defaultCenter:{lat:51.5055,lng:-.0754},defaultZoom:13})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.foursquare.com/v2/venues/search?ll=51.5055,-0.0754&query=burgers,pizza&limit=15&radius=2000&client_id=5MFR2FIONG3CCN5IXQBUE3HFBKEECHZZ0Q1XNZVPZQEZMZDQ&client_secret=XVR2PAUVWZSPQY5RY0HZV54ZMBBXM2CWG4RKCGGQUT0JC0OU&v=20181001").then(function(e){return e.json()}).then(function(t){return e.setState({venues:t.response.venues})}).catch(function(e){alert("There has been an error data from the Foursquare API. \n        Please refresh your browser and try again!\n        error: ".concat(e))}).then(function(){var t=[],a={};e.state.venues.map(function(e){return a={lat:e.location.lat,lng:e.location.lng,title:e.name,venueId:e.id,streetNumber:e.location.formattedAddress[0],postCode:e.location.formattedAddress[3]},t.push(a),t}),e.setState({markers:t}),e.setState({filteredMarkers:t})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"app",role:"main"},r.a.createElement(h,null),r.a.createElement(f,{tabIndex:"0",defaultCenter:this.state.defaultCenter,defaultZoom:this.state.defaultZoom,markers:this.state.markers,filteredMarkers:this.state.filteredMarkers,zoom:this.state.zoom,handleMarkerClick:this.handleMarkerClick,clickedMarkerVenueId:this.state.clickedMarkerVenueId,stopMarkerAnimation:this.stopMarkerAnimation}),r.a.createElement(b,{markers:this.state.markers,listIsOpen:this.state.listIsOpen,toggleList:this.handleToggle,handleListItemClick:this.handleMarkerClick,handleKeyPress:this.handleKeyPress,clickedMarkerVenueId:this.state.clickedMarkerVenueId,userInput:this.state.query,handleInputSearch:this.handleInputSearch,handleMarkerFilter:this.handleMarkerFilter}),r.a.createElement(E,null))}}]),t}(n.Component)),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/neighbourhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/neighbourhood-map","/service-worker.js");C?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):y(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):y(e)})}}()}},[[146,1,2]]]);
//# sourceMappingURL=main.86ca6815.chunk.js.map